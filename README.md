# Плагин QGIS: Экспорт векторных слоёв в формат MapInfo (TAB/MID)

[![QGIS Version](https://img.shields.io/badge/QGIS-3.0%2B-brightgreen.svg)](https://qgis.org)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Плагин добавляет опцию экспорта ("Экспорт в MapInfo") в контекстное меню векторных слоёв QGIS для сохранения в формате MIF/TAB с автоматической подстановкой пределов BOUNDS.
Основное отличие данного плагина от встроенного экспорта — автоматический расчёт и подстановка пределов BOUNDS. 

> **Подробнее про параметры Gdal driver в пункте "Creation Issues":** https://gdal.org/en/stable/drivers/vector/mitab.html#vector-mitab

Данный подход обеспечивает более точную привязку экспортируемого векторного слоя в MapInfo. Данное улучшение облегчает экспорт и последующую работу со слоем в MapInfo.
При нажатии ПКМ на векторый слой и вызове экспорта - плагин автоматически подставит пределы, относительно расположения слоя в пределах субъектов РФ, но Вы можете изменять пределы как пожелаете, выбрав в соответсвующем списке нужный субъект РФ или вовсе вписав их вручную, а так же сохранять пресеты пределов или удалять пресеты.
Пользовательский интерфейс плагина довольно прост, что не создаст проблем с его использованием.
Также возможность сохранения кастомных пределов в список упрощает будущую работу с экспортом слоёв.

> **Важно:** Плагин разработан только для слоёв в границах субъектов РФ

## Содержание
1. [Структура файлов](#структура-файлов)
2. [Возможности](#возможности-плагина)
3. [Установка](#установка)
4. [Использование](#использование)
5. [Требования](#требования)
6. [Разработка](#разработка)
7. [Ограничения](#ограничения)

## Структура файлов

export_map_info_exp/

├── init.py # Инициализация плагина

├── boundsManager.py # Модуль содержит в себе функции отвечающий за работу с пределами BOUNDS

├── csvHandler.py # Модуль отвечающий за работу с csv файлом

├──  customBounds.ui # UI для дополнительного окна, с настройкой своих пределов

├── custom_bounds_dialog.py  # Модуль, отвечающий за работу и сигналы дополнительного окна, с настройокой пределов

├── export_map_info.py # Основная логика плагина

├── export_map_info_dialog.py # Логика работы диалогового окна

├── export_map_info_dialog_base.ui # UI-дизайн (Qt Designer)

├── icon.png # Иконка плагина

├── metadata.txt # Метаданные плагина

├── regions.csv # База координат субъектов РФ

├── qTableWidgetManager.py # Модуль отвечающий за работу с таблицей пределов (QTableView)

├── saveProcessHandler.py # Основной модуль, отвечающий за обработку сохранения, экспорт, сигналы обработки.

├── utils.py # Хранит в себе обработку "сигналов" интерфейса, а так же вспомогательные функции


## Возможности плагина
- Авторасчёт пределов для слоя
- Ручная корректировка BOUNDS
- Выбор региона из базы субъектов РФ
- Сохранение пользовательских пресетов
- История ранее использованных параметров
- Экспорт через GDAL/OGR в форматах:
  - TAB (MapInfo Native)
  - MIF/MID (MapInfo Interchange Format)

## Установка
- **Способ 1: Через менеджер плагинов QGIS:**     
  - Скачайте ZIP-архив репозитория
  - В QGIS перейдите: Модули → Управление модулями → Установить из ZIP
  - Выберите скачанный ZIP-файл
  - Активируйте плагин в разделе "Установленные"

- **Способ 2: Ручная установка:**    
  ```bash
    # Для Windows:
    cd %APPDATA%\QGIS\QGIS3\profiles\default\python\plugins\
    
    # Для Linux/macOS:
    cd ~/.local/share/QGIS/QGIS3/profiles/default/python/plugins/
    
    # Клонирование репозитория:
    git clone https://github.com/Paoak/Export_MapInfo.git
  ```
## Использование  
- В панели слоёв щёлкните ПКМ по векторному слою
- Выберите Экспорт в MapInfo
- В диалоговом окне:
  - Автоматически подставятся пределы региона
  - Выберите другой регион при необходимости
  - Откорректируйте пределы вручную
- Сохраните пресет для повторного использования
- Укажите путь для сохранения файла
- Нажмите Экспорт

## Требования
- QGIS версии 3.0 и выше
- Python 3.x
- Библиотеки:
  - gdal (поставляется с QGIS)
  - pandas (для работы с CSV)
 
## Разработка
Для модификации интерфейса:
- Установите Qt Designer
- Отредактируйте export_map_info_exp_dialog_base.ui
- Скомпилируйте UI-файл:
```bash
  pyuic5 export_map_info_dialog_base.ui -o export_map_info_dialog.py
```

## Ограничения
- Работает только с векторными слоями
- Оптимизирован под WGS84 (EPSG:4326)
